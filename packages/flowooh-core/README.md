# Flowooh

Flowooh is a light-weight extensible workflow based on Nodejs which is built with Typescript.

Flowooh does not rely on any service framework and can easily be integrated into different Node server applications such as Express, Koa, NestJs, etc. This makes Flowooh very flexible and easy to use. Flowooh provides rich features and APIs to help developers quickly build workflow engines and workflow applications. Additionally, Flowooh supports plugins and extensions, allowing developers to customize and extend functionality based on their needs.

# Vision and purpose

Workflow engines are commonly used in development, and there are already excellent workflow projects such as Activiti, Flowable, Camunda, etc.

However, there is a lack of similar tools or projects on Node.js. I hope to build a workflow engine based on Node.js to help developers better integrate and implement workflow applications on the Node.js server.

# Getting Started

#### Create a Nodejs server application

You can choose the Node.js server framework you like, here we will take [NestJS](https://docs.nestjs.com/) as an example.

```bash
$ npm i -g @nestjs/cli
$ nest new project-name
```

#### Install Dependencies

Flowooh relies on [knex](https://knexjs.org/), but does not depend on a specific database driver. You can choose a driver which is supported by knex. Here we will take [node-sqlite3](https://www.npmjs.com/package/sqlite3) as an example.

```bash
$ npm install @flowooh/data sqlite3 --save
```

If you want to loads environment variables from a `.env` file, you may also need [dotenv](https://www.npmjs.com/package/dotenv)

```bash
$ npm install dotenv --save
```

#### Set Environment Variables

Set environment variables in `.env` file

```.dosini
FLOWOOH_DATA_DB_CLIENT=sqlite3
FLOWOOH_DATA_DB_CONNECTION=.db/test.sqlite
```

#### Completed!

Now, you can use flowooh in your project~
Let's try it in `src/app.controller.ts`, which is generated by nestjs starter.

```typescript
import { Controller, Get } from '@nestjs/common';
import { AppService } from './app.service';
// import flowooh
import flowooh from '@flowooh/data';

@Controller()
export class AppController {
  constructor(private readonly appService: AppService) {}

  @Get()
  async getHello() {
    this.appService.getHello();
    // get the list of workflow's definition
    const data = await flowooh.service.repo.definition.listDefinitions({});
    return data;
  }
}
```

# Pulling and Submitting Code

If you have any comment or advice, please report your [issue](https://github.com/flowooh/flowooh/issues), or make any change as you wish and submit a [PR](https://github.com/flowooh/flowooh/pulls).

## Pulling Code

Please click the "[Fork](https://github.com/flowooh/flowooh/fork)" button in the main page of Flowooh to fork the latest code into your own repository. Then clone yours to your local machine.

## Install Dependencies

You can install all the dependencies listed in package.json with npm:

```bash
$ npm i
```

## Link to Global

You can link flowooh to global of your local machine, so you can use it in developing locally.

```bash
$ npm run build
$ npm run link:data
```

1. Before you link flowooh to global, you should build it by using `npm run build`.
2. Since Flowooh is a Monorepo built by [Lerna](https://lerna.js.org/), it is not recommend to using `npm link` directly. you can use `npm run link:<package name>` to link certain package to global, such as `npm run link:data` means to link `@flowooh/data` to global.

## Use Flowooh locally

You can use it in your project or sample project locally by `npm link`.

```bash
$ cd path-of-sample-project
$ npm link @flowooh/data
```

Don't forget set environment variables.

```env
FLOWOOH_DATA_DB_CLIENT=sqlite3
FLOWOOH_DATA_DB_CONNECTION=.db/test.sqlite
```

1. You can use sqlite3 to quickly start your service without the need for additional configuration of the database environment. `FLOWOOH_DATA_DB_CONNECTION` could be a file path, the directory should be already exist.
2. You can use the database which [Knex](https://knexjs.org/) is supported.
